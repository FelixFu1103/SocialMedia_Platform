[{"/Users/feli-v/Desktop/socialMedia/new_front/src/index.js":"1","/Users/feli-v/Desktop/socialMedia/new_front/src/App.js":"2","/Users/feli-v/Desktop/socialMedia/new_front/src/MainRouter.js":"3","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/FriendsComponent.js":"4","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/ProfileComponent.js":"5","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/MenuTab.js":"6","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/UsersComponent.js":"7","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/EccChat.js":"8","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/PostsComponent.js":"9","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/NewPostComponent.js":"10","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/NoEccChat.js":"11","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/History.js":"12","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/LoginComponent.js":"13","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/SinglePostComponent.js":"14","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/MenuComponent.js":"15","/Users/feli-v/Desktop/socialMedia/new_front/src/helper/user.js":"16","/Users/feli-v/Desktop/socialMedia/new_front/src/helper/interest.js":"17","/Users/feli-v/Desktop/socialMedia/new_front/src/helper/friends.js":"18","/Users/feli-v/Desktop/socialMedia/new_front/src/helper/posts.js":"19","/Users/feli-v/Desktop/socialMedia/new_front/src/helper/socket.js":"20","/Users/feli-v/Desktop/socialMedia/new_front/src/helper/index.js":"21"},{"size":411,"mtime":1612159380681,"results":"22","hashOfConfig":"23"},{"size":255,"mtime":1612159380674,"results":"24","hashOfConfig":"23"},{"size":1171,"mtime":1616487039238,"results":"25","hashOfConfig":"23"},{"size":7063,"mtime":1617140219812,"results":"26","hashOfConfig":"23"},{"size":2958,"mtime":1616487396953,"results":"27","hashOfConfig":"23"},{"size":500,"mtime":1614927061573,"results":"28","hashOfConfig":"23"},{"size":1866,"mtime":1616487039244,"results":"29","hashOfConfig":"23"},{"size":4453,"mtime":1616487039256,"results":"30","hashOfConfig":"23"},{"size":755,"mtime":1612159380682,"results":"31","hashOfConfig":"23"},{"size":3851,"mtime":1615097944510,"results":"32","hashOfConfig":"23"},{"size":4179,"mtime":1617087392154,"results":"33","hashOfConfig":"23"},{"size":87,"mtime":1612159380681,"results":"34","hashOfConfig":"23"},{"size":1862,"mtime":1612159380681,"results":"35","hashOfConfig":"23"},{"size":2899,"mtime":1616487039243,"results":"36","hashOfConfig":"23"},{"size":2264,"mtime":1616487039242,"results":"37","hashOfConfig":"23"},{"size":1728,"mtime":1616487396952,"results":"38","hashOfConfig":"23"},{"size":2322,"mtime":1617126932635,"results":"39","hashOfConfig":"23"},{"size":460,"mtime":1617126932622,"results":"40","hashOfConfig":"23"},{"size":2545,"mtime":1616487039240,"results":"41","hashOfConfig":"23"},{"size":3627,"mtime":1614927061572,"results":"42","hashOfConfig":"23"},{"size":1645,"mtime":1616487039239,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},"y6oa6s",{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"53","messages":"54","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"46"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"46"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"46"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"46"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67","usedDeprecatedRules":"46"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"46"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"46"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"46"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"46"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94","usedDeprecatedRules":"46"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},"/Users/feli-v/Desktop/socialMedia/new_front/src/index.js",[],["97","98"],"/Users/feli-v/Desktop/socialMedia/new_front/src/App.js",[],"/Users/feli-v/Desktop/socialMedia/new_front/src/MainRouter.js",[],"/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/FriendsComponent.js",["99","100","101","102","103","104"],"/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/ProfileComponent.js",["105","106","107"],"import React from 'react';\nimport { isAuthenticated, signout } from \"../helper\";\nimport {withRouter } from 'react-router-dom';\nimport { read } from '../helper/user';\nimport DefaultProfile from \"../images/avatar.jpg\";\nimport { Card, Button, Descriptions, Tag, Avatar, Col, Row} from 'antd';\nimport history from './History';\nimport {list} from '../helper/posts';\nimport _ from 'lodash';\nimport SinglePostComponent from './SinglePostComponent';\nimport { EditOutlined, EllipsisOutlined, SettingOutlined } from '@ant-design/icons';\n\nconst { Meta } = Card;\nclass ProfileComponent extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n          user: {followers: []},\n          myPost:[]\n        };\n    }\n    \n    componentDidMount() {\n      const userId = this.props.match.params.userId;\n      const token = isAuthenticated().token;\n      list(1).then(data => {\n        if (data.error) {\n            console.log(data.error);\n        } else {\n            const temp = _.filter(data, (d) => {return d.postedBy._id === userId})\n            this.setState({myPost : temp})\n        }\n      });\n      read(userId, token).then(data => {\n        if (data.error) {\n          console.log(\"data.error: \", data.error);\n        } else {\n          this.setState({ user: data});\n        }\n      }); \n    }\n\n    returnToHome = () => {\n      history.push('/');  \n    }\n\n    render(){\n        const {user, myPost} = this.state;\n        return (\n          <div style={{marginLeft:40, marginTop:30}}>\n            <Button type=\"primary\" style={{marginLeft:40, backgroundColor:\"GrayText\"}} onClick={()=>signout(this.returnToHome)}>Sign out</Button>\n            <Card title={user.name} bordered={false} style={{ width: 1000 }}>\n            \n              <Descriptions size=\"small\" column={3}>\n                <Descriptions.Item label=\"Email\">{user.email}</Descriptions.Item>\n                <Descriptions.Item label=\"Create Time\">{new Date(user.created).toDateString()}</Descriptions.Item>\n              </Descriptions>\n              <Descriptions size=\"small\" column={10}>\n                <Descriptions.Item label=\"Followers\">{_.map(user.followers,(key)=><Tag color=\"purple\">{key.name}</Tag>)}</Descriptions.Item>\n              </Descriptions>\n            </Card>\n            <Row style={{marginTop:30}}>\n              {_.map(myPost,(post)=> (\n                <Col span={5} offset={1}>\n                  <Card\n                    style={{ width: 250 }}\n                    cover={<img src={`${process.env.REACT_APP_API_URL}/post/photo/${post._id}`} alt={post.title} />}\n                    actions={[<SettingOutlined key=\"setting\" />, <EditOutlined key=\"edit\" />, <EllipsisOutlined key=\"ellipsis\" />,]}>\n                    <Meta title={post.title} description={post.body}/>\n                  </Card>\n                </Col>\n              ))}\n            </Row>\n          </div>\n            \n        )\n    }\n}\n\nexport default withRouter(ProfileComponent);","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/MenuTab.js",["108","109","110"],"import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { signout, isAuthenticated } from '../helper';\nimport LoginComponent from './LoginComponent';\nimport MenuComponent from './MenuComponent';\n\nclass MenuTab extends React.Component {\n    render() {\n        return (\n            <div>\n                {console.log(isAuthenticated())}\n                {isAuthenticated() ? <MenuComponent/>:<LoginComponent/>}\n            </div>\n        )\n    }\n}\n\nexport default MenuTab;","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/UsersComponent.js",["111","112"],"import React from 'react';\nimport { list } from '../helper/user';\nimport { Table, Tag, Space } from 'antd';\n\nclass UsersComponent extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            users: []\n        };\n    }\n\n    componentDidMount() {\n        list().then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                this.setState({ users: data });\n            }\n        });\n    }\n    columns = [\n        {\n          title: 'Name',\n          dataIndex: 'name',\n          key: 'name',\n          width:'200px',\n          render: text => <a>{text}</a>,\n        },\n        {\n          title: 'Start Date',\n          dataIndex: 'created',\n          key: 'created',\n          width:'300px',\n          render: text => <Space>{new Date(text).toDateString()}</Space>\n        },\n        {\n          title: 'Email',\n          dataIndex: 'email',\n          key: 'email',\n          width:'300px',\n        },\n        /*{\n          title: 'Follower',\n          key: 'followers',\n          dataIndex: 'followers',\n          width:'300px',\n          sorter: (a, b) => a.followers.length - b.followers.length,\n          render: followers => <Space>{followers.length}</Space> \n        },\n        {\n            title: 'Following',\n            key: 'following',\n            dataIndex: 'following',\n            width:'300px',\n            sorter: (a, b) => a.followers.length - b.followers.length,\n            render: followers => <Space>{followers.length}</Space> \n          },*/\n      ];\n\n    render(){\n        const {users} = this.state;\n        return (\n            <div style={{marginLeft:80, marginTop:50}}>\n                {console.log(users)}\n                <Table columns={this.columns} dataSource={users}/>\n            </div>\n        )\n    }\n}\n\nexport default UsersComponent;","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/EccChat.js",["113"],"import React, { Component } from \"react\";\nimport socket,{ws} from '../helper/socket';\nimport ecc from 'eccjs';\nimport {Button} from 'antd';\nconst keys = ecc.generate(ecc.ENC_DEC);\n\nexport default class index extends Component {\n    state = {\n        content:'',\n    }\n    componentDidMount(){\n        socket.initSocket()\n        ws.onmessage=(msg)=>{\n            let msgdata = JSON.parse(msg.data)\n            let msgObj = JSON.parse(ecc.decrypt(msgdata.key, msgdata.info));\n            let userInfo = localStorage.jwt?JSON.parse(localStorage.jwt):{user:{_id:''}}\n            if(!userInfo.user._id||!msgObj.msg) return false\n            const chatBody =document.getElementById('chatBody')\n            if(msgObj._id==userInfo.user._id){\n                const self = document.createElement('div')\n                const selfMsg = document.createElement('div')\n                const selfImg = document.createElement('div')\n                const selfContent=document.createElement('div')\n                const selfName = document.createElement('p')\n                selfName.className=\"chat_name\"\n                selfName.innerHTML=msgObj.name||'guest'\n                self.className=\"chat_self\"\n                selfMsg.className=\"chat_msg\"\n                selfMsg.innerHTML = msgObj.msg\n                selfImg.className=\"chat_img\";\n                selfImg.innerHTML = `<img src=\"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1235408669,1544530317&fm=26&gp=0.jpg\"/>`\n                selfContent.appendChild(selfName)\n                selfContent.appendChild(selfMsg)\n                self.appendChild(selfContent)\n                self.appendChild(selfImg)\n                chatBody.appendChild(self)\n            }else{\n                const other = document.createElement('div')\n                const otherMsg = document.createElement('div')\n                const otherImg = document.createElement('div')\n                const otherContent=document.createElement('div')\n                const otherName = document.createElement('p')\n                otherName.className=\"chat_name\"\n                otherName.innerHTML=msgObj.name||'tourist'\n                other.className=\"chat_other\"\n                otherMsg.className=\"chat_msg\"\n                otherMsg.innerHTML = msgObj.msg\n                otherImg.className=\"chat_img\";\n                otherImg.innerHTML = `<img src=\"https://dss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1007923841,2418143080&fm=26&gp=0.jpg\"/>`\n                other.appendChild(otherImg)\n                otherContent.appendChild(otherName)\n                otherContent.appendChild(otherMsg)\n                other.appendChild(otherContent)\n                chatBody.appendChild(other)\n            }\n            console.info(\"****** decrypt key \" + msgdata.key + \"******\")\n        }\n    }\n    send = ()=>{\n        const {content} = this.state;\n        if(!content){return false}\n        let userInfo = localStorage.jwt?JSON.parse(localStorage.jwt):null\n        let userObj = userInfo?{\n            _id:userInfo.user._id,\n            name:userInfo.user.name,\n            msg:content\n        }:{\n            msg:content\n        }\n        const sendMsg = {\n            info:ecc.encrypt(keys.enc,JSON.stringify(userObj)),\n            key:keys.dec\n        }\n        socket.send(JSON.stringify(sendMsg))\n        this.setState({content:''})\n        console.info(\"****** encrypt key \" + keys.enc + \"******\")\n    }\n    clear = ()=>{this.setState({content:''})}\n    render() {\n        return (\n            <div className=\"flexBox\">\n                <div className=\"chatBox\">\n                    <div className=\"chatHead\"><p>EccChat</p></div>\n                    <div className=\"chatBody\" id=\"chatBody\">\n                    </div>\n                    <div className=\"chatFooter\">\n                        <textarea rows={5} style={{resize:'none'}} value={this.state.content} onChange={(e)=>{\n                            this.setState({content:e.target.value.trim()})\n                        }} />\n                        <div className=\"chat_bt\">\n                            <Button className=\"btn btn-raised btn-info chat_btchild\" onClick={()=>this.clear()}>clear</Button>\n                            <Button type=\"primary\" className=\"btn btn-raised btn-primary chat_btchild\" onClick={()=>this.send()}>send</Button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/PostsComponent.js",["114"],"import React, {createElement} from 'react';\nimport SinglePostComponent from './SinglePostComponent';\nimport {list} from '../helper/posts';\n\nclass PostsComponent extends React.Component {\n    constructor() {\n        super();\n        this.state={\n            posts: [],\n        }\n    }\n    componentDidMount() {\n        list(1).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                this.setState({ posts: data });\n            }\n        });\n    }\n    render(){\n        return (\n            <div style={{marginLeft:50, marginTop:30}}>\n                {this.state.posts.map((post)=><SinglePostComponent post={post}/>)}\n            </div>    \n        )\n    }\n}\n\nexport default PostsComponent;","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/NewPostComponent.js",[],"/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/NoEccChat.js",["115"],"import React, { Component } from \"react\";\nimport socket,{ws} from '../helper/socket';\nimport {Button} from 'antd';\n\n\nexport default class index extends Component {\n    state = {\n        content:'',\n    }\n    componentDidMount(){\n        socket.initSocket()\n        ws.onmessage=(msg)=>{\n            let msgdata = JSON.parse(msg.data)\n            let msgObj = JSON.parse(msgdata.info);\n            let userInfo = localStorage.jwt?JSON.parse(localStorage.jwt):{user:{_id:''}}\n            if(!userInfo.user._id||!msgObj.msg) return false\n            const chatBody =document.getElementById('chatBody')\n            if(msgObj._id==userInfo.user._id){\n                const self = document.createElement('div')\n                const selfMsg = document.createElement('div')\n                const selfImg = document.createElement('div')\n                const selfContent=document.createElement('div')\n                const selfName = document.createElement('p')\n                selfName.className=\"chat_name\"\n                selfName.innerHTML=msgObj.name||'guest'\n                self.className=\"chat_self\"\n                selfMsg.className=\"chat_msg\"\n                selfMsg.innerHTML = msgObj.msg\n                selfImg.className=\"chat_img\";\n                selfImg.innerHTML = `<img src=\"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1235408669,1544530317&fm=26&gp=0.jpg\"/>`\n                selfContent.appendChild(selfName)\n                selfContent.appendChild(selfMsg)\n                self.appendChild(selfContent)\n                self.appendChild(selfImg)\n                chatBody.appendChild(self)\n            }else{\n                const other = document.createElement('div')\n                const otherMsg = document.createElement('div')\n                const otherImg = document.createElement('div')\n                const otherContent=document.createElement('div')\n                const otherName = document.createElement('p')\n                otherName.className=\"chat_name\"\n                otherName.innerHTML=msgObj.name||'tourist'\n                other.className=\"chat_other\"\n                otherMsg.className=\"chat_msg\"\n                otherMsg.innerHTML = msgObj.msg\n                otherImg.className=\"chat_img\";\n                otherImg.innerHTML = `<img src=\"https://dss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1007923841,2418143080&fm=26&gp=0.jpg\"/>`\n                other.appendChild(otherImg)\n                otherContent.appendChild(otherName)\n                otherContent.appendChild(otherMsg)\n                other.appendChild(otherContent)\n                chatBody.appendChild(other)\n            }\n        }\n    }\n    send = ()=>{\n        const {content} = this.state;\n        if(!content){return false}\n        let userInfo = localStorage.jwt?JSON.parse(localStorage.jwt):null\n        let userObj = userInfo?{\n            _id:userInfo.user._id,\n            name:userInfo.user.name,\n            msg:content\n        }:{\n            msg:content\n        }\n        const sendMsg = {\n            info:JSON.stringify(userObj),\n        }\n        socket.send(JSON.stringify(sendMsg))\n        this.setState({content:''})\n    }\n    clear = ()=>{this.setState({content:''})}\n    render() {\n        return (\n            <div className=\"flexBox\">\n                <div className=\"chatBox\">\n                    <div className=\"chatHead\"><p>NoEccChat</p></div>\n                    <div className=\"chatBody\" id=\"chatBody\">\n                    </div>\n                    <div className=\"chatFooter\">\n                        <textarea rows={5} style={{resize:'none'}} value={this.state.content} onChange={(e)=>{\n                            this.setState({content:e.target.value.trim()})\n                        }} />\n                        <div className=\"chat_bt\">\n                            <Button className=\"btn btn-raised btn-info chat_btchild\" onClick={()=>this.clear()}>clear</Button>\n                            <Button type=\"primary\" className=\"btn btn-raised btn-primary chat_btchild\" onClick={()=>this.send()}>send</Button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/History.js",[],"/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/LoginComponent.js",["116","117"],"import React from 'react';\nimport { Form, Input, Button, Checkbox} from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport {signin, authenticate} from '../helper'\nimport './style.css';\n\nclass LoginComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            email:\"\",\n            password:\"\"\n        }\n    }\n    onFinish = (values) => {\n        this.setState({\n            email: values.email,\n            password: values.password\n        })\n        const { email, password } = this.state;\n        const user = {email, password};\n        signin(user).then(data => {\n            authenticate(data, () => {\n                \n            });\n        })\n    };\n    render() {\n        return (\n            <Form name=\"normal_login\" className=\"login-form\" onFinish={this.onFinish} style={{marginTop:\"200px\", marginLeft:\"800px\"}}>\n                <Form.Item name=\"email\" rules={[{required: true,message: 'Please input your Email!',},]}>\n                    <Input prefix={<UserOutlined className=\"site-form-item-icon\"/>} placeholder=\"Email\"/>\n                </Form.Item>\n                <Form.Item name=\"password\" rules={[{required: true,message: 'Please input your Password!',},]}>\n                    <Input prefix={<LockOutlined className=\"site-form-item-icon\" />} type=\"password\" placeholder=\"Password\"/>\n                </Form.Item>\n                <Form.Item>\n                    <a className=\"login-form-forgot\" href=\"\">Forgot password</a>\n                </Form.Item>\n                <Form.Item>\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">Log in</Button>\n                    <Button type=\"primary\" className=\"login-form-button\">Register</Button>\n                </Form.Item>\n    </Form>\n  );\n}\n}\n\nexport default LoginComponent;","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/SinglePostComponent.js",["118","119","120"],"import React, {createElement} from 'react';\nimport { Comment, Tooltip, Avatar } from 'antd';\nimport { LikeOutlined, LikeFilled } from '@ant-design/icons';\nimport moment from 'moment';\nimport {isAuthenticated} from '../helper';\nimport {singlePost, remove, like, unlike} from '../helper/posts';\n\nclass SinglePostComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            like: this.checkLike(this.props.post.likes),\n            likes: this.props.post.likes.length,\n            comments: [],\n        }\n    }\n    updateComments = comments => {\n        this.setState({ comments });\n    };\n    likeToggle = () => {\n        let callApi = this.state.like ? unlike : like;\n        const userId = isAuthenticated().user._id;\n        const postId = this.props.post._id;\n        const token = isAuthenticated().token;\n\n        callApi(userId, token, postId).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                this.setState({\n                    like: !this.state.like,\n                    likes: data.likes.length\n                });\n            }\n        });\n    };\n    deletePost = () => {\n        const token = isAuthenticated().token;\n        remove(this.props.post._id, token);\n        window.location.reload();\n    };\n    checkLike = (likes) => {\n        const userId = isAuthenticated().user._id;\n        likes.map((id)=>{\n            if (id === userId) {\n                return true;\n            }\n        })\n        return false;\n    }\n    render(){\n        const {post} = this.props;\n        const actions = [\n            <Tooltip key=\"comment-basic-like\" title=\"Like\">\n              <span onClick={this.likeToggle}>\n                {createElement(this.state.like ? LikeFilled : LikeOutlined)}\n                <span className=\"comment-action\">{this.state.likes}</span>\n              </span>\n            </Tooltip>,\n            <span key=\"comment-basic-reply-to\">Reply to</span>,\n            isAuthenticated().user._id===post.postedBy._id?<span onClick={this.deletePost} key=\"comment-basic-delete\">delete</span>:null,\n          ];\n        return (\n           <Comment actions={actions} author={<a>{post.postedBy.name}</a>} \n                avatar={<Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" alt=\"Han Solo\"/>}\n                content={\n                    <div>\n                        <h4>{post.title}</h4>\n                        <p>{post.body}</p>\n                        <img src={`${process.env.REACT_APP_API_URL}/post/photo/${post._id}`} alt={post.title} />\n                    </div>\n                }\n                datetime={<Tooltip title={moment(post.created).format('YYYY-MM-DD HH:mm:ss')}><span>{moment(post.created).fromNow()}</span></Tooltip>}\n            />       \n        )\n    }\n}\n\nexport default SinglePostComponent;","/Users/feli-v/Desktop/socialMedia/new_front/src/mainPage/MenuComponent.js",["121"],"import React from 'react';\nimport { Menu, Button } from 'antd';\nimport { Link} from 'react-router-dom';\nimport {isAuthenticated} from '../helper';\nimport {AppstoreOutlined,MenuUnfoldOutlined,MenuFoldOutlined,PieChartOutlined,DesktopOutlined,ContainerOutlined,MailOutlined,} from '@ant-design/icons';\nimport EccChat from \"./EccChat\";\n\nconst { SubMenu } = Menu;\nclass MenuComponent extends React.Component {\n    state = {\n        collapsed: false,\n    };\n    toggleCollapsed = () => {\n        this.setState({\n          collapsed: !this.state.collapsed,\n        });\n    };\n    render() {\n        return (\n            <div style={{ width: 256, height:900, backgroundColor: this.state.collapsed?\"white\":\"black\"}}>\n                <Button type=\"primary\" onClick={this.toggleCollapsed} style={{ marginBottom: 16 }}>\n                {React.createElement(this.state.collapsed ? MenuUnfoldOutlined : MenuFoldOutlined)}\n                </Button>\n                <Menu defaultSelectedKeys={['recentPosts']} defaultOpenKeys={['posts']} mode=\"inline\" theme=\"dark\" inlineCollapsed={this.state.collapsed}>\n                <Menu.Item key=\"profile\" icon={<PieChartOutlined />}>\n                    <Link to={`/profile/${isAuthenticated().user._id}`}>Profile</Link>\n                </Menu.Item>\n                <Menu.Item key=\"users\" icon={<DesktopOutlined />}>\n                    <Link to=\"/users\">Users</Link>\n                </Menu.Item>\n                <Menu.Item key=\"friends\" icon={<ContainerOutlined />}>\n                    <Link to=\"/find_friends\">Find Friends</Link>\n                </Menu.Item>\n                <SubMenu key=\"posts\" icon={<MailOutlined />} title=\"Posts\">\n                    <Menu.Item key=\"recentPosts\"><Link to=\"/recent_posts\">Recent Posts</Link></Menu.Item>\n                    <Menu.Item key=\"newPost\"><Link to=\"/new_post\">New Post</Link></Menu.Item>\n                </SubMenu>\n                <SubMenu key=\"chatting\" icon={<AppstoreOutlined/>} title=\"Chatting\">\n                    <Menu.Item key=\"no\"><Link to=\"/NoEcc\">No security</Link></Menu.Item>\n                    <Menu.Item key=\"ecc\"><Link to=\"/Ecc\">ECC</Link></Menu.Item>\n                </SubMenu>\n                </Menu>\n            </div>\n        )\n    }\n}\n\nexport default MenuComponent;\n","/Users/feli-v/Desktop/socialMedia/new_front/src/helper/user.js",[],"/Users/feli-v/Desktop/socialMedia/new_front/src/helper/interest.js",[],"/Users/feli-v/Desktop/socialMedia/new_front/src/helper/friends.js",[],"/Users/feli-v/Desktop/socialMedia/new_front/src/helper/posts.js",[],"/Users/feli-v/Desktop/socialMedia/new_front/src/helper/socket.js",["122","123","124","125","126","127","128","129","130"],"var URL = \"127.0.0.1:8080\"\nvar lockReconnect=false;//if there is a successful connection\nvar timeoutnum = null;\nvar serverTimeoutObj = null;\nvar timeout = 6000;\nvar timeoutObj = null;\nvar times = 0;\nvar heartTimes =0;\nvar ws = null;\nexport {ws}\nexport default {\n        //websocket connection\n        initSocket() {\n            // socket instance\n            const userInfo = localStorage.jwt?JSON.parse(localStorage.jwt):{user:{_id:''}}\n            ws = new WebSocket(`ws://${process.env.REACT_APP_WS_URL}/${userInfo.user._id}`)\n            // listen socket connection\n            ws.onopen = this.open.bind(this)\n            // listen socket error msg\n            ws.onerror = this.error.bind(this)\n            // listen socket msg\n            ws.onmessage = this.getMessage.bind(this)\n            //close listening\n            ws.onclose = this.onclose.bind(this)\n        },\n        open() {\n            times = 0\n            let un = localStorage.getItem('userName')\n            let newKey = localStorage.getItem('key')\n            if(newKey&&un&&localStorage.getItem('token')){\n                let sendMsg = [{name:un,key:newKey}]\n                this.send(JSON.stringify(sendMsg))\n            }\n            this.start()\n\n            console.log('\\n' + \" %c websocket connect successfully \" + '\\n', 'color: white; background: #009999; padding:5px 0; font-size:12px;');\n        },\n        error() {\n            console.log(\"connect error\")\n            this.reconnect()\n        },\n        getMessage(msg) {\n            // lockReconnect = true\n            // clearInterval(serverTimeout)\n            this.reset()\n            console.log(msg);\n\n        },\n        send(data) {\n            ws.send(data)\n            console.log('\\n' + \" %c msg sent \" + '\\n', 'color: white; background: #009999; padding:5px 0; font-size:12px;');\n        },\n        close() {\n            ws.close()\n        },\n        onclose(){\n                console.log(\"socket closed\")\n                heartTimes = 0\n                this.reconnect()\n        },\n        reconnect() {//reconnect\n            if(lockReconnect) {\n                return;\n            }\n            lockReconnect = true;\n            times++;\n            console.log('\\n' + \" %c \"+times+\"reconnect WebSocket... \" + '\\n', 'color: white; background: #009999; padding:5px 0; font-size:12px;');\n            //没连接上会一直重连，设置延迟避免请求过多\n            timeoutnum && clearTimeout(timeoutnum);\n            timeoutnum = setTimeout(()=> {\n                //new connection\n                this.initSocket();\n                lockReconnect = false;\n            },3000);\n        },\n        reset(){//reset\n            //clear time\n            clearTimeout(timeoutObj);\n            clearTimeout(serverTimeoutObj);\n            //restart\n            this.start();\n        },\n        start(){//start\n            if(localStorage.getItem('userName')){\n                timeoutObj && clearTimeout(timeoutObj);\n                serverTimeoutObj && clearTimeout(serverTimeoutObj);\n                timeoutObj = setTimeout(()=>{\n                    //sent to backend，\n                    if (ws.readyState == 1) {//if connection is good\n                        heartTimes++;\n                        ws.send(`${localStorage.getItem('userName')} ${heartTimes}`);\n                    }else{//reconnect\n                        this.reconnect();\n                    }\n                    serverTimeoutObj = setTimeout(()=>{\n                        //close\n                        ws.close();\n                    }, timeout);\n                },timeout)\n            }\n        },\n}\n","/Users/feli-v/Desktop/socialMedia/new_front/src/helper/index.js",[],{"ruleId":"131","replacedBy":"132"},{"ruleId":"133","replacedBy":"134"},{"ruleId":"135","severity":1,"message":"136","line":2,"column":27,"nodeType":"137","messageId":"138","endLine":2,"endColumn":34},{"ruleId":"135","severity":1,"message":"139","line":5,"column":8,"nodeType":"137","messageId":"138","endLine":5,"endColumn":22},{"ruleId":"135","severity":1,"message":"140","line":6,"column":10,"nodeType":"137","messageId":"138","endLine":6,"endColumn":20},{"ruleId":"135","severity":1,"message":"141","line":7,"column":27,"nodeType":"137","messageId":"138","endLine":7,"endColumn":31},{"ruleId":"135","severity":1,"message":"142","line":7,"column":33,"nodeType":"137","messageId":"138","endLine":7,"endColumn":38},{"ruleId":"135","severity":1,"message":"143","line":8,"column":8,"nodeType":"137","messageId":"138","endLine":8,"endColumn":15},{"ruleId":"135","severity":1,"message":"139","line":5,"column":8,"nodeType":"137","messageId":"138","endLine":5,"endColumn":22},{"ruleId":"135","severity":1,"message":"144","line":6,"column":43,"nodeType":"137","messageId":"138","endLine":6,"endColumn":49},{"ruleId":"135","severity":1,"message":"145","line":10,"column":8,"nodeType":"137","messageId":"138","endLine":10,"endColumn":27},{"ruleId":"135","severity":1,"message":"146","line":2,"column":10,"nodeType":"137","messageId":"138","endLine":2,"endColumn":14},{"ruleId":"135","severity":1,"message":"147","line":2,"column":16,"nodeType":"137","messageId":"138","endLine":2,"endColumn":26},{"ruleId":"135","severity":1,"message":"136","line":3,"column":10,"nodeType":"137","messageId":"138","endLine":3,"endColumn":17},{"ruleId":"135","severity":1,"message":"148","line":3,"column":17,"nodeType":"137","messageId":"138","endLine":3,"endColumn":20},{"ruleId":"149","severity":1,"message":"150","line":28,"column":27,"nodeType":"151","endLine":28,"endColumn":30},{"ruleId":"152","severity":1,"message":"153","line":19,"column":26,"nodeType":"154","messageId":"155","endLine":19,"endColumn":28},{"ruleId":"135","severity":1,"message":"156","line":1,"column":16,"nodeType":"137","messageId":"138","endLine":1,"endColumn":29},{"ruleId":"152","severity":1,"message":"153","line":18,"column":26,"nodeType":"154","messageId":"155","endLine":18,"endColumn":28},{"ruleId":"135","severity":1,"message":"157","line":2,"column":31,"nodeType":"137","messageId":"138","endLine":2,"endColumn":39},{"ruleId":"149","severity":1,"message":"158","line":38,"column":21,"nodeType":"151","endLine":38,"endColumn":62},{"ruleId":"135","severity":1,"message":"159","line":6,"column":9,"nodeType":"137","messageId":"138","endLine":6,"endColumn":19},{"ruleId":"160","severity":1,"message":"161","line":44,"column":23,"nodeType":"162","messageId":"163","endLine":44,"endColumn":25},{"ruleId":"149","severity":1,"message":"150","line":64,"column":47,"nodeType":"151","endLine":64,"endColumn":50},{"ruleId":"135","severity":1,"message":"164","line":6,"column":8,"nodeType":"137","messageId":"138","endLine":6,"endColumn":15},{"ruleId":"135","severity":1,"message":"165","line":1,"column":5,"nodeType":"137","messageId":"138","endLine":1,"endColumn":8},{"ruleId":"166","severity":1,"message":"167","line":11,"column":1,"nodeType":"168","endLine":102,"endColumn":2},{"ruleId":"169","severity":1,"message":"170","line":36,"column":30,"nodeType":"154","messageId":"171","endLine":36,"endColumn":31},{"ruleId":"169","severity":1,"message":"170","line":36,"column":70,"nodeType":"154","messageId":"171","endLine":36,"endColumn":71},{"ruleId":"169","severity":1,"message":"170","line":51,"column":30,"nodeType":"154","messageId":"171","endLine":51,"endColumn":31},{"ruleId":"169","severity":1,"message":"170","line":51,"column":48,"nodeType":"154","messageId":"171","endLine":51,"endColumn":49},{"ruleId":"169","severity":1,"message":"170","line":67,"column":30,"nodeType":"154","messageId":"171","endLine":67,"endColumn":31},{"ruleId":"169","severity":1,"message":"170","line":67,"column":71,"nodeType":"154","messageId":"171","endLine":67,"endColumn":72},{"ruleId":"152","severity":1,"message":"153","line":89,"column":39,"nodeType":"154","messageId":"155","endLine":89,"endColumn":41},"no-native-reassign",["172"],"no-negated-in-lhs",["173"],"no-unused-vars","'signout' is defined but never used.","Identifier","unusedVar","'DefaultProfile' is defined but never used.","'listByUser' is defined but never used.","'Form' is defined but never used.","'Input' is defined but never used.","'history' is defined but never used.","'Avatar' is defined but never used.","'SinglePostComponent' is defined but never used.","'Link' is defined but never used.","'withRouter' is defined but never used.","'Tag' is defined but never used.","jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'createElement' is defined but never used.","'Checkbox' is defined but never used.","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","'singlePost' is defined but never used.","array-callback-return","Array.prototype.map() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","'EccChat' is defined but never used.","'URL' is assigned a value but never used.","import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","no-useless-concat","Unexpected string concatenation of literals.","unexpectedConcat","no-global-assign","no-unsafe-negation"]