{"ast":null,"code":"import _classCallCheck from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/feli-v/Desktop/socialMedia/react_front/src/post/Posts.js\";\nimport React, { Component } from \"react\";\nimport { list } from \"./apiPost\";\nimport DefaultPost from \"../images/mountains.jpg\";\nimport { Link } from \"react-router-dom\";\n\nvar Posts =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Posts, _Component);\n\n  function Posts() {\n    var _this;\n\n    _classCallCheck(this, Posts);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Posts).call(this));\n\n    _this.loadPosts = function (page) {\n      list(page).then(function (data) {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          _this.setState({\n            posts: data\n          });\n        }\n      });\n    };\n\n    _this.loadMore = function (number) {\n      _this.setState({\n        page: _this.state.page + number\n      });\n\n      _this.loadPosts(_this.state.page + number);\n    };\n\n    _this.loadLess = function (number) {\n      _this.setState({\n        page: _this.state.page - number\n      });\n\n      _this.loadPosts(_this.state.page - number);\n    };\n\n    _this.renderPosts = function (posts) {\n      return React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, posts.map(function (post, i) {\n        var posterId = post.postedBy ? \"/user/\".concat(post.postedBy._id) : \"\";\n        var posterName = post.postedBy ? post.postedBy.name : \" Unknown\";\n        return React.createElement(\"div\", {\n          className: \"card col-md-4\",\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"\".concat(process.env.REACT_APP_API_URL, \"/post/photo/\").concat(post._id),\n          alt: post.title,\n          onError: function onError(i) {\n            return i.target.src = \"\".concat(DefaultPost);\n          },\n          className: \"img-thunbnail mb-3\",\n          style: {\n            height: \"200px\",\n            width: \"100%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }), React.createElement(\"h5\", {\n          className: \"card-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, post.title), React.createElement(\"p\", {\n          className: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, post.body.substring(0, 100)), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"font-italic mark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, \"Posted by\", \" \", React.createElement(Link, {\n          to: \"\".concat(posterId),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, posterName, \" \"), \"on \", new Date(post.created).toDateString()), React.createElement(Link, {\n          to: \"/post/\".concat(post._id),\n          className: \"btn btn-raised btn-primary btn-sm\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"Read more\")));\n      }));\n    };\n\n    _this.state = {\n      posts: [],\n      page: 1\n    };\n    return _this;\n  }\n\n  _createClass(Posts, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadPosts(this.state.page);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          posts = _this$state.posts,\n          page = _this$state.page;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-5 mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, !posts.length ? \"No more posts!\" : \"Recent Posts\"), this.renderPosts(posts), page > 1 ? React.createElement(\"button\", {\n        className: \"btn btn-raised btn-warning mr-5 mt-5 mb-5\",\n        onClick: function onClick() {\n          return _this2.loadLess(1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Previous (\", this.state.page - 1, \")\") : \"\", posts.length ? React.createElement(\"button\", {\n        className: \"btn btn-raised btn-success mt-5 mb-5\",\n        onClick: function onClick() {\n          return _this2.loadMore(1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Next (\", page + 1, \")\") : \"\");\n    }\n  }]);\n\n  return Posts;\n}(Component);\n\nexport default Posts;","map":{"version":3,"sources":["/Users/feli-v/Desktop/socialMedia/react_front/src/post/Posts.js"],"names":["React","Component","list","DefaultPost","Link","Posts","loadPosts","page","then","data","error","console","log","setState","posts","loadMore","number","state","loadLess","renderPosts","map","post","i","posterId","postedBy","_id","posterName","name","process","env","REACT_APP_API_URL","title","target","src","height","width","body","substring","Date","created","toDateString","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { list } from \"./apiPost\";\nimport DefaultPost from \"../images/mountains.jpg\";\nimport { Link } from \"react-router-dom\";\n\nclass Posts extends Component {\n    constructor() {\n        super();\n        this.state = {\n            posts: [],\n            page: 1\n        };\n    }\n\n    loadPosts = page => {\n        list(page).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                this.setState({ posts: data });\n            }\n        });\n    };\n\n    componentDidMount() {\n        this.loadPosts(this.state.page);\n    }\n\n    loadMore = number => {\n        this.setState({ page: this.state.page + number });\n        this.loadPosts(this.state.page + number);\n    };\n\n    loadLess = number => {\n        this.setState({ page: this.state.page - number });\n        this.loadPosts(this.state.page - number);\n    };\n\n    renderPosts = posts => {\n        return (\n            <div className=\"row\">\n                {posts.map((post, i) => {\n                    const posterId = post.postedBy\n                        ? `/user/${post.postedBy._id}`\n                        : \"\";\n                    const posterName = post.postedBy\n                        ? post.postedBy.name\n                        : \" Unknown\";\n\n                    return (\n                        <div className=\"card col-md-4\" key={i}>\n                            <div className=\"card-body\">\n                                <img\n                                    src={`${\n                                        process.env.REACT_APP_API_URL\n                                    }/post/photo/${post._id}`}\n                                    alt={post.title}\n                                    onError={i =>\n                                        (i.target.src = `${DefaultPost}`)\n                                    }\n                                    className=\"img-thunbnail mb-3\"\n                                    style={{ height: \"200px\", width: \"100%\" }}\n                                />\n                                <h5 className=\"card-title\">{post.title}</h5>\n                                <p className=\"card-text\">\n                                    {post.body.substring(0, 100)}\n                                </p>\n                                <br />\n                                <p className=\"font-italic mark\">\n                                    Posted by{\" \"}\n                                    <Link to={`${posterId}`}>\n                                        {posterName}{\" \"}\n                                    </Link>\n                                    on {new Date(post.created).toDateString()}\n                                </p>\n                                <Link\n                                    to={`/post/${post._id}`}\n                                    className=\"btn btn-raised btn-primary btn-sm\"\n                                >\n                                    Read more\n                                </Link>\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n        );\n    };\n\n    render() {\n        const { posts, page } = this.state;\n        return (\n            <div className=\"container\">\n                <h2 className=\"mt-5 mb-5\">\n                    {!posts.length ? \"No more posts!\" : \"Recent Posts\"}\n                </h2>\n\n                {this.renderPosts(posts)}\n\n                {page > 1 ? (\n                    <button\n                        className=\"btn btn-raised btn-warning mr-5 mt-5 mb-5\"\n                        onClick={() => this.loadLess(1)}\n                    >\n                        Previous ({this.state.page - 1})\n                    </button>\n                ) : (\n                    \"\"\n                )}\n\n                {posts.length ? (\n                    <button\n                        className=\"btn btn-raised btn-success mt-5 mb-5\"\n                        onClick={() => this.loadMore(1)}\n                    >\n                        Next ({page + 1})\n                    </button>\n                ) : (\n                    \"\"\n                )}\n            </div>\n        );\n    }\n}\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}