{"ast":null,"code":"import _classCallCheck from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/feli-v/Desktop/socialMedia/react_front/src/post/Comment.js\";\nimport React, { Component } from \"react\";\nimport { comment, uncomment } from \"./apiPost\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport DefaultProfile from \"../images/avatar.jpg\";\n\nvar Comment =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Comment, _Component);\n\n  function Comment() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Comment);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Comment)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      text: \"\",\n      error: \"\"\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState({\n        error: \"\"\n      });\n\n      _this.setState({\n        text: event.target.value\n      });\n    };\n\n    _this.isValid = function () {\n      var text = _this.state.text;\n\n      if (!text.length > 0 || text.length > 150) {\n        _this.setState({\n          error: \"Comment should not be empty and less than 150 characters long\"\n        });\n\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.addComment = function (e) {\n      e.preventDefault();\n\n      if (!isAuthenticated()) {\n        _this.setState({\n          error: \"Please signin to leave a comment\"\n        });\n\n        return false;\n      }\n\n      if (_this.isValid()) {\n        var userId = isAuthenticated().user._id;\n\n        var token = isAuthenticated().token;\n        var postId = _this.props.postId;\n        comment(userId, token, postId, {\n          text: _this.state.text\n        }).then(function (data) {\n          if (data.error) {\n            console.log(data.error);\n          } else {\n            _this.setState({\n              text: \"\"\n            }); // dispatch fresh list of coments to parent (SinglePost)\n\n\n            _this.props.updateComments(data.comments);\n          }\n        });\n      }\n    };\n\n    _this.deleteComment = function (comment) {\n      var userId = isAuthenticated().user._id;\n\n      var token = isAuthenticated().token;\n      var postId = _this.props.postId;\n      uncomment(userId, token, postId, comment).then(function (data) {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          _this.props.updateComments(data.comments);\n        }\n      });\n    };\n\n    _this.deleteConfirmed = function (comment) {\n      var answer = window.confirm(\"Are you sure you want to delete your comment?\");\n\n      if (answer) {\n        _this.deleteComment(comment);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Comment, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var comments = this.props.comments;\n      var error = this.state.error;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-5 mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Leave a comment\"), React.createElement(\"form\", {\n        onSubmit: this.addComment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.handleChange,\n        value: this.state.text,\n        className: \"form-control\",\n        placeholder: \"Leave a comment...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-raised btn-success mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Post\"))), React.createElement(\"div\", {\n        className: \"alert alert-danger\",\n        style: {\n          display: error ? \"\" : \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, error), React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, comments.length, \" Comments\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), comments.map(function (comment, i) {\n        return React.createElement(\"div\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/user/\".concat(comment.postedBy._id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          style: {\n            borderRadius: \"50%\",\n            border: \"1px solid black\"\n          },\n          className: \"float-left mr-2\",\n          height: \"30px\",\n          width: \"30px\",\n          onError: function onError(i) {\n            return i.target.src = \"\".concat(DefaultProfile);\n          },\n          src: \"\".concat(process.env.REACT_APP_API_URL, \"/user/photo/\").concat(comment.postedBy._id),\n          alt: comment.postedBy.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"lead\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, comment.text), React.createElement(\"p\", {\n          className: \"font-italic mark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \"Posted by\", \" \", React.createElement(Link, {\n          to: \"/user/\".concat(comment.postedBy._id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, comment.postedBy.name, \" \"), \"on\", \" \", new Date(comment.created).toDateString(), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, isAuthenticated().user && isAuthenticated().user._id === comment.postedBy._id && React.createElement(React.Fragment, null, React.createElement(\"span\", {\n          onClick: function onClick() {\n            return _this2.deleteConfirmed(comment);\n          },\n          className: \"text-danger float-right mr-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, \"Remove\")))))));\n      })));\n    }\n  }]);\n\n  return Comment;\n}(Component);\n\nexport default Comment;","map":{"version":3,"sources":["/Users/feli-v/Desktop/socialMedia/react_front/src/post/Comment.js"],"names":["React","Component","comment","uncomment","isAuthenticated","Link","DefaultProfile","Comment","state","text","error","handleChange","event","setState","target","value","isValid","length","addComment","e","preventDefault","userId","user","_id","token","postId","props","then","data","console","log","updateComments","comments","deleteComment","deleteConfirmed","answer","window","confirm","display","map","i","postedBy","borderRadius","border","src","process","env","REACT_APP_API_URL","name","Date","created","toDateString"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,EAAkBC,SAAlB,QAAmC,WAAnC;AACA,SAASC,eAAT,QAAgC,SAAhC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,cAAP,MAA2B,sBAA3B;;IAEMC,O;;;;;;;;;;;;;;;;;UACFC,K,GAAQ;AACJC,MAAAA,IAAI,EAAE,EADF;AAEJC,MAAAA,KAAK,EAAE;AAFH,K;;UAKRC,Y,GAAe,UAAAC,KAAK,EAAI;AACpB,YAAKC,QAAL,CAAc;AAAEH,QAAAA,KAAK,EAAE;AAAT,OAAd;;AACA,YAAKG,QAAL,CAAc;AAAEJ,QAAAA,IAAI,EAAEG,KAAK,CAACE,MAAN,CAAaC;AAArB,OAAd;AACH,K;;UAEDC,O,GAAU,YAAM;AAAA,UACJP,IADI,GACK,MAAKD,KADV,CACJC,IADI;;AAEZ,UAAI,CAACA,IAAI,CAACQ,MAAN,GAAe,CAAf,IAAoBR,IAAI,CAACQ,MAAL,GAAc,GAAtC,EAA2C;AACvC,cAAKJ,QAAL,CAAc;AACVH,UAAAA,KAAK,EACD;AAFM,SAAd;;AAIA,eAAO,KAAP;AACH;;AACD,aAAO,IAAP;AACH,K;;UAEDQ,U,GAAa,UAAAC,CAAC,EAAI;AACdA,MAAAA,CAAC,CAACC,cAAF;;AAEA,UAAI,CAAChB,eAAe,EAApB,EAAwB;AACpB,cAAKS,QAAL,CAAc;AAAEH,UAAAA,KAAK,EAAE;AAAT,SAAd;;AACA,eAAO,KAAP;AACH;;AAED,UAAI,MAAKM,OAAL,EAAJ,EAAoB;AAChB,YAAMK,MAAM,GAAGjB,eAAe,GAAGkB,IAAlB,CAAuBC,GAAtC;;AACA,YAAMC,KAAK,GAAGpB,eAAe,GAAGoB,KAAhC;AACA,YAAMC,MAAM,GAAG,MAAKC,KAAL,CAAWD,MAA1B;AAEAvB,QAAAA,OAAO,CAACmB,MAAD,EAASG,KAAT,EAAgBC,MAAhB,EAAwB;AAAEhB,UAAAA,IAAI,EAAE,MAAKD,KAAL,CAAWC;AAAnB,SAAxB,CAAP,CAA0DkB,IAA1D,CACI,UAAAC,IAAI,EAAI;AACJ,cAAIA,IAAI,CAAClB,KAAT,EAAgB;AACZmB,YAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAAClB,KAAjB;AACH,WAFD,MAEO;AACH,kBAAKG,QAAL,CAAc;AAAEJ,cAAAA,IAAI,EAAE;AAAR,aAAd,EADG,CAEH;;;AACA,kBAAKiB,KAAL,CAAWK,cAAX,CAA0BH,IAAI,CAACI,QAA/B;AACH;AACJ,SATL;AAWH;AACJ,K;;UAEDC,a,GAAgB,UAAA/B,OAAO,EAAI;AACvB,UAAMmB,MAAM,GAAGjB,eAAe,GAAGkB,IAAlB,CAAuBC,GAAtC;;AACA,UAAMC,KAAK,GAAGpB,eAAe,GAAGoB,KAAhC;AACA,UAAMC,MAAM,GAAG,MAAKC,KAAL,CAAWD,MAA1B;AAEAtB,MAAAA,SAAS,CAACkB,MAAD,EAASG,KAAT,EAAgBC,MAAhB,EAAwBvB,OAAxB,CAAT,CAA0CyB,IAA1C,CAA+C,UAAAC,IAAI,EAAI;AACnD,YAAIA,IAAI,CAAClB,KAAT,EAAgB;AACZmB,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAAClB,KAAjB;AACH,SAFD,MAEO;AACH,gBAAKgB,KAAL,CAAWK,cAAX,CAA0BH,IAAI,CAACI,QAA/B;AACH;AACJ,OAND;AAOH,K;;UAEDE,e,GAAkB,UAAAhC,OAAO,EAAI;AACzB,UAAIiC,MAAM,GAAGC,MAAM,CAACC,OAAP,CACT,+CADS,CAAb;;AAGA,UAAIF,MAAJ,EAAY;AACR,cAAKF,aAAL,CAAmB/B,OAAnB;AACH;AACJ,K;;;;;;;6BAEQ;AAAA;;AAAA,UACG8B,QADH,GACgB,KAAKN,KADrB,CACGM,QADH;AAAA,UAEGtB,KAFH,GAEa,KAAKF,KAFlB,CAEGE,KAFH;AAIL,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,EAGI;AAAM,QAAA,QAAQ,EAAE,KAAKQ,UAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AACI,QAAA,IAAI,EAAC,MADT;AAEI,QAAA,QAAQ,EAAE,KAAKP,YAFnB;AAGI,QAAA,KAAK,EAAE,KAAKH,KAAL,CAAWC,IAHtB;AAII,QAAA,SAAS,EAAC,cAJd;AAKI,QAAA,WAAW,EAAC,oBALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAQI;AAAQ,QAAA,SAAS,EAAC,iCAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARJ,CADJ,CAHJ,EAkBI;AACI,QAAA,SAAS,EAAC,oBADd;AAEI,QAAA,KAAK,EAAE;AAAE6B,UAAAA,OAAO,EAAE5B,KAAK,GAAG,EAAH,GAAQ;AAAxB,SAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIKA,KAJL,CAlBJ,EAyBI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8BsB,QAAQ,CAACf,MAAvC,cADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,EAGKe,QAAQ,CAACO,GAAT,CAAa,UAACrC,OAAD,EAAUsC,CAAV;AAAA,eACV;AAAK,UAAA,GAAG,EAAEA,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,IAAD;AAAM,UAAA,EAAE,kBAAWtC,OAAO,CAACuC,QAAR,CAAiBlB,GAA5B,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AACI,UAAA,KAAK,EAAE;AACHmB,YAAAA,YAAY,EAAE,KADX;AAEHC,YAAAA,MAAM,EAAE;AAFL,WADX;AAKI,UAAA,SAAS,EAAC,iBALd;AAMI,UAAA,MAAM,EAAC,MANX;AAOI,UAAA,KAAK,EAAC,MAPV;AAQI,UAAA,OAAO,EAAE,iBAAAH,CAAC;AAAA,mBACLA,CAAC,CAAC1B,MAAF,CAAS8B,GAAT,aAAkBtC,cAAlB,CADK;AAAA,WARd;AAWI,UAAA,GAAG,YACCuC,OAAO,CAACC,GAAR,CAAYC,iBADb,yBAEY7C,OAAO,CAACuC,QAAR,CAAiBlB,GAF7B,CAXP;AAcI,UAAA,GAAG,EAAErB,OAAO,CAACuC,QAAR,CAAiBO,IAd1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CADJ,EAmBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAG,UAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAqB9C,OAAO,CAACO,IAA7B,CADJ,EAEI;AAAG,UAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACc,GADd,EAEI,oBAAC,IAAD;AACI,UAAA,EAAE,kBAAWP,OAAO,CAACuC,QAAR,CAAiBlB,GAA5B,CADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAGKrB,OAAO,CAACuC,QAAR,CAAiBO,IAHtB,EAG4B,GAH5B,CAFJ,QAOO,GAPP,EAQK,IAAIC,IAAJ,CACG/C,OAAO,CAACgD,OADX,EAECC,YAFD,EARL,EAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACK/C,eAAe,GAAGkB,IAAlB,IACGlB,eAAe,GAAGkB,IAAlB,CAAuBC,GAAvB,KACIrB,OAAO,CAACuC,QAAR,CAAiBlB,GAFxB,IAGO,0CACI;AACI,UAAA,OAAO,EAAE;AAAA,mBACL,MAAI,CAACW,eAAL,CACIhC,OADJ,CADK;AAAA,WADb;AAMI,UAAA,SAAS,EAAC,8BANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,CAJZ,CAXJ,CAFJ,CAnBJ,CADJ,CADU;AAAA,OAAb,CAHL,CAzBJ,CADJ;AAyFH;;;;EAtKiBD,S;;AAyKtB,eAAeM,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { comment, uncomment } from \"./apiPost\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport DefaultProfile from \"../images/avatar.jpg\";\n\nclass Comment extends Component {\n    state = {\n        text: \"\",\n        error: \"\"\n    };\n\n    handleChange = event => {\n        this.setState({ error: \"\" });\n        this.setState({ text: event.target.value });\n    };\n\n    isValid = () => {\n        const { text } = this.state;\n        if (!text.length > 0 || text.length > 150) {\n            this.setState({\n                error:\n                    \"Comment should not be empty and less than 150 characters long\"\n            });\n            return false;\n        }\n        return true;\n    };\n\n    addComment = e => {\n        e.preventDefault();\n\n        if (!isAuthenticated()) {\n            this.setState({ error: \"Please signin to leave a comment\" });\n            return false;\n        }\n\n        if (this.isValid()) {\n            const userId = isAuthenticated().user._id;\n            const token = isAuthenticated().token;\n            const postId = this.props.postId;\n\n            comment(userId, token, postId, { text: this.state.text }).then(\n                data => {\n                    if (data.error) {\n                        console.log(data.error);\n                    } else {\n                        this.setState({ text: \"\" });\n                        // dispatch fresh list of coments to parent (SinglePost)\n                        this.props.updateComments(data.comments);\n                    }\n                }\n            );\n        }\n    };\n\n    deleteComment = comment => {\n        const userId = isAuthenticated().user._id;\n        const token = isAuthenticated().token;\n        const postId = this.props.postId;\n\n        uncomment(userId, token, postId, comment).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                this.props.updateComments(data.comments);\n            }\n        });\n    };\n\n    deleteConfirmed = comment => {\n        let answer = window.confirm(\n            \"Are you sure you want to delete your comment?\"\n        );\n        if (answer) {\n            this.deleteComment(comment);\n        }\n    };\n\n    render() {\n        const { comments } = this.props;\n        const { error } = this.state;\n\n        return (\n            <div>\n                <h2 className=\"mt-5 mb-5\">Leave a comment</h2>\n\n                <form onSubmit={this.addComment}>\n                    <div className=\"form-group\">\n                        <input\n                            type=\"text\"\n                            onChange={this.handleChange}\n                            value={this.state.text}\n                            className=\"form-control\"\n                            placeholder=\"Leave a comment...\"\n                        />\n                        <button className=\"btn btn-raised btn-success mt-2\">\n                            Post\n                        </button>\n                    </div>\n                </form>\n\n                <div\n                    className=\"alert alert-danger\"\n                    style={{ display: error ? \"\" : \"none\" }}\n                >\n                    {error}\n                </div>\n\n                <div className=\"col-md-12\">\n                    <h3 className=\"text-primary\">{comments.length} Comments</h3>\n                    <hr />\n                    {comments.map((comment, i) => (\n                        <div key={i}>\n                            <div>\n                                <Link to={`/user/${comment.postedBy._id}`}>\n                                    <img\n                                        style={{\n                                            borderRadius: \"50%\",\n                                            border: \"1px solid black\"\n                                        }}\n                                        className=\"float-left mr-2\"\n                                        height=\"30px\"\n                                        width=\"30px\"\n                                        onError={i =>\n                                            (i.target.src = `${DefaultProfile}`)\n                                        }\n                                        src={`${\n                                            process.env.REACT_APP_API_URL\n                                        }/user/photo/${comment.postedBy._id}`}\n                                        alt={comment.postedBy.name}\n                                    />\n                                </Link>\n                                <div>\n                                    <p className=\"lead\">{comment.text}</p>\n                                    <p className=\"font-italic mark\">\n                                        Posted by{\" \"}\n                                        <Link\n                                            to={`/user/${comment.postedBy._id}`}\n                                        >\n                                            {comment.postedBy.name}{\" \"}\n                                        </Link>\n                                        on{\" \"}\n                                        {new Date(\n                                            comment.created\n                                        ).toDateString()}\n                                        <span>\n                                            {isAuthenticated().user &&\n                                                isAuthenticated().user._id ===\n                                                    comment.postedBy._id && (\n                                                    <>\n                                                        <span\n                                                            onClick={() =>\n                                                                this.deleteConfirmed(\n                                                                    comment\n                                                                )\n                                                            }\n                                                            className=\"text-danger float-right mr-1\"\n                                                        >\n                                                            Remove\n                                                        </span>\n                                                    </>\n                                                )}\n                                        </span>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Comment;\n"]},"metadata":{},"sourceType":"module"}