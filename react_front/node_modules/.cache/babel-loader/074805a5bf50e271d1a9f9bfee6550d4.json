{"ast":null,"code":"import _classCallCheck from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/feli-v/Desktop/socialMedia/react_front/src/user/Profile.js\";\nimport React, { Component } from \"react\";\nimport { isAuthenticated } from \"../auth\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport { read } from \"./apiUser\";\nimport DefaultProfile from \"../images/avatar.jpg\";\nimport DeleteUser from \"./DeleteUser\";\nimport FollowProfileButton from \"./FollowProfileButton\";\nimport ProfileTabs from \"./ProfileTabs\";\nimport { listByUser } from \"../post/apiPost\";\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile() {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Profile).call(this));\n\n    _this.checkFollow = function (user) {\n      var jwt = isAuthenticated();\n      var match = user.followers.find(function (follower) {\n        // one id has many other ids (followers) and vice versa\n        return follower._id === jwt.user._id;\n      });\n      return match;\n    };\n\n    _this.clickFollowButton = function (callApi) {\n      var userId = isAuthenticated().user._id;\n\n      var token = isAuthenticated().token;\n      callApi(userId, token, _this.state.user._id).then(function (data) {\n        if (data.error) {\n          _this.setState({\n            error: data.error\n          });\n        } else {\n          _this.setState({\n            user: data,\n            following: !_this.state.following\n          });\n        }\n      });\n    };\n\n    _this.init = function (userId) {\n      var token = isAuthenticated().token;\n      read(userId, token).then(function (data) {\n        if (data.error) {\n          _this.setState({\n            redirectToSignin: true\n          });\n        } else {\n          var following = _this.checkFollow(data);\n\n          _this.setState({\n            user: data,\n            following: following\n          });\n\n          _this.loadPosts(data._id);\n        }\n      });\n    };\n\n    _this.loadPosts = function (userId) {\n      var token = isAuthenticated().token;\n      listByUser(userId, token).then(function (data) {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          _this.setState({\n            posts: data\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      user: {\n        following: [],\n        followers: []\n      },\n      redirectToSignin: false,\n      following: false,\n      error: \"\",\n      posts: []\n    };\n    return _this;\n  } // check follow\n\n\n  _createClass(Profile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var userId = this.props.match.params.userId;\n      this.init(userId);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var userId = props.match.params.userId;\n      this.init(userId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          redirectToSignin = _this$state.redirectToSignin,\n          user = _this$state.user,\n          posts = _this$state.posts;\n      if (redirectToSignin) return React.createElement(Redirect, {\n        to: \"/signin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      });\n      var photoUrl = user._id ? \"\".concat(process.env.REACT_APP_API_URL, \"/user/photo/\").concat(user._id, \"?\").concat(new Date().getTime()) : DefaultProfile;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-5 mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Profile\"), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          height: \"200px\",\n          width: \"auto\"\n        },\n        className: \"img-thumbnail\",\n        src: photoUrl,\n        onError: function onError(i) {\n          return i.target.src = \"\".concat(DefaultProfile);\n        },\n        alt: user.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"lead mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Hello \", user.name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Email: \", user.email), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Joined \".concat(new Date(user.created).toDateString()))), isAuthenticated().user && isAuthenticated().user._id === user._id ? React.createElement(\"div\", {\n        className: \"d-inline-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Link, {\n        className: \"btn btn-raised btn-info mr-5\",\n        to: \"/post/create\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Create Post\"), React.createElement(Link, {\n        className: \"btn btn-raised btn-success mr-5\",\n        to: \"/user/edit/\".concat(user._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Edit Profile\"), React.createElement(DeleteUser, {\n        userId: user._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      })) : React.createElement(FollowProfileButton, {\n        following: this.state.following,\n        onButtonClick: this.clickFollowButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, isAuthenticated().user && isAuthenticated().user.role === \"admin\" && React.createElement(\"div\", {\n        class: \"card mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Admin\"), React.createElement(\"p\", {\n        className: \"mb-2 text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Edit/Delete as an Admin\"), React.createElement(Link, {\n        className: \"btn btn-raised btn-success mr-5\",\n        to: \"/user/edit/\".concat(user._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Edit Profile\"), React.createElement(DeleteUser, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })))))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col md-12 mt-5 mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"lead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, user.about), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), React.createElement(ProfileTabs, {\n        followers: user.followers,\n        following: user.following,\n        posts: posts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nexport default Profile;","map":{"version":3,"sources":["/Users/feli-v/Desktop/socialMedia/react_front/src/user/Profile.js"],"names":["React","Component","isAuthenticated","Redirect","Link","read","DefaultProfile","DeleteUser","FollowProfileButton","ProfileTabs","listByUser","Profile","checkFollow","user","jwt","match","followers","find","follower","_id","clickFollowButton","callApi","userId","token","state","then","data","error","setState","following","init","redirectToSignin","loadPosts","console","log","posts","props","params","photoUrl","process","env","REACT_APP_API_URL","Date","getTime","height","width","i","target","src","name","email","created","toDateString","role","about"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { isAuthenticated } from \"../auth\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport { read } from \"./apiUser\";\nimport DefaultProfile from \"../images/avatar.jpg\";\nimport DeleteUser from \"./DeleteUser\";\nimport FollowProfileButton from \"./FollowProfileButton\";\nimport ProfileTabs from \"./ProfileTabs\";\nimport { listByUser } from \"../post/apiPost\";\n\nclass Profile extends Component {\n  constructor() {\n    super();\n    this.state = {\n      user: { following: [], followers: [] },\n      redirectToSignin: false,\n      following: false,\n      error: \"\",\n      posts: []\n    };\n  }\n\n  // check follow\n  checkFollow = user => {\n    const jwt = isAuthenticated();\n    const match = user.followers.find(follower => {\n      // one id has many other ids (followers) and vice versa\n      return follower._id === jwt.user._id;\n    });\n    return match;\n  };\n\n  clickFollowButton = callApi => {\n    const userId = isAuthenticated().user._id;\n    const token = isAuthenticated().token;\n\n    callApi(userId, token, this.state.user._id).then(data => {\n      if (data.error) {\n        this.setState({ error: data.error });\n      } else {\n        this.setState({ user: data, following: !this.state.following });\n      }\n    });\n  };\n\n  init = userId => {\n    const token = isAuthenticated().token;\n    read(userId, token).then(data => {\n      if (data.error) {\n        this.setState({ redirectToSignin: true });\n      } else {\n        let following = this.checkFollow(data);\n        this.setState({ user: data, following });\n        this.loadPosts(data._id);\n      }\n    });\n  };\n\n  loadPosts = userId => {\n    const token = isAuthenticated().token;\n    listByUser(userId, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        this.setState({ posts: data });\n      }\n    });\n  };\n\n  componentDidMount() {\n    const userId = this.props.match.params.userId;\n    this.init(userId);\n  }\n\n  componentWillReceiveProps(props) {\n    const userId = props.match.params.userId;\n    this.init(userId);\n  }\n\n  render() {\n    const { redirectToSignin, user, posts } = this.state;\n    if (redirectToSignin) return <Redirect to=\"/signin\" />;\n\n    const photoUrl = user._id\n      ? `${process.env.REACT_APP_API_URL}/user/photo/${\n          user._id\n        }?${new Date().getTime()}`\n      : DefaultProfile;\n\n    return (\n      <div className=\"container\">\n        <h2 className=\"mt-5 mb-5\">Profile</h2>\n        <div className=\"row\">\n          <div className=\"col-md-4\">\n            <img\n              style={{ height: \"200px\", width: \"auto\" }}\n              className=\"img-thumbnail\"\n              src={photoUrl}\n              onError={i => (i.target.src = `${DefaultProfile}`)}\n              alt={user.name}\n            />\n          </div>\n\n          <div className=\"col-md-8\">\n            <div className=\"lead mt-2\">\n              <p>Hello {user.name}</p>\n              <p>Email: {user.email}</p>\n              <p>{`Joined ${new Date(user.created).toDateString()}`}</p>\n            </div>\n\n            {isAuthenticated().user &&\n            isAuthenticated().user._id === user._id ? (\n              <div className=\"d-inline-block\">\n                <Link\n                  className=\"btn btn-raised btn-info mr-5\"\n                  to={`/post/create`}\n                >\n                  Create Post\n                </Link>\n\n                <Link\n                  className=\"btn btn-raised btn-success mr-5\"\n                  to={`/user/edit/${user._id}`}\n                >\n                  Edit Profile\n                </Link>\n                <DeleteUser userId={user._id} />\n              </div>\n            ) : (\n              <FollowProfileButton\n                following={this.state.following}\n                onButtonClick={this.clickFollowButton}\n              />\n            )}\n\n            <div>\n              {isAuthenticated().user &&\n                isAuthenticated().user.role === \"admin\" && (\n                  <div class=\"card mt-5\">\n                    <div className=\"card-body\">\n                      <h5 className=\"card-title\">Admin</h5>\n                      <p className=\"mb-2 text-danger\">\n                        Edit/Delete as an Admin\n                      </p>\n                      <Link\n                        className=\"btn btn-raised btn-success mr-5\"\n                        to={`/user/edit/${user._id}`}\n                      >\n                        Edit Profile\n                      </Link>\n                      {/*<DeleteUser userId={user._id} />*/}\n                      <DeleteUser />\n                    </div>\n                  </div>\n                )}\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col md-12 mt-5 mb-5\">\n            <hr />\n            <p className=\"lead\">{user.about}</p>\n            <hr />\n\n            <ProfileTabs\n              followers={user.followers}\n              following={user.following}\n              posts={posts}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}