{"ast":null,"code":"import _defineProperty from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/feli-v/Desktop/socialMedia/react_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/feli-v/Desktop/socialMedia/react_front/src/user/Signin.js\";\nimport React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { signin, authenticate } from \"../auth\";\nimport SocialLogin from \"./SocialLogin\";\n\nvar Signin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signin, _Component);\n\n  function Signin() {\n    var _this;\n\n    _classCallCheck(this, Signin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signin).call(this));\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState({\n          error: \"\"\n        });\n\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.recaptchaHandler = function (e) {\n      _this.setState({\n        error: \"\"\n      });\n\n      var userDay = e.target.value.toLowerCase();\n      var dayCount;\n\n      if (userDay === \"sunday\") {\n        dayCount = 0;\n      } else if (userDay === \"monday\") {\n        dayCount = 1;\n      } else if (userDay === \"tuesday\") {\n        dayCount = 2;\n      } else if (userDay === \"wednesday\") {\n        dayCount = 3;\n      } else if (userDay === \"thursday\") {\n        dayCount = 4;\n      } else if (userDay === \"friday\") {\n        dayCount = 5;\n      } else if (userDay === \"saturday\") {\n        dayCount = 6;\n      }\n\n      if (dayCount === new Date().getDay()) {\n        _this.setState({\n          recaptcha: true\n        });\n\n        return true;\n      } else {\n        _this.setState({\n          recaptcha: false\n        });\n\n        return false;\n      }\n    };\n\n    _this.clickSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      var _this$state = _this.state,\n          email = _this$state.email,\n          password = _this$state.password;\n      var user = {\n        email: email,\n        password: password\n      }; // console.log(user);\n\n      if (_this.state.recaptcha) {\n        signin(user).then(function (data) {\n          if (data.error) {\n            _this.setState({\n              error: data.error,\n              loading: false\n            });\n          } else {\n            // authenticate\n            authenticate(data, function () {\n              _this.setState({\n                redirectToReferer: true\n              });\n            });\n          }\n        });\n      } else {\n        _this.setState({\n          loading: false,\n          error: \"What day is today? Please write a correct answer!\"\n        });\n      }\n    };\n\n    _this.signinForm = function (email, password, recaptcha) {\n      return React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        onChange: _this.handleChange(\"email\"),\n        type: \"email\",\n        className: \"form-control\",\n        value: email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        onChange: _this.handleChange(\"password\"),\n        type: \"password\",\n        className: \"form-control\",\n        value: password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, recaptcha ? \"Thanks. You got it!\" : \"What day is today?\"), React.createElement(\"input\", {\n        onChange: _this.recaptchaHandler,\n        type: \"text\",\n        className: \"form-control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        onClick: _this.clickSubmit,\n        className: \"btn btn-raised btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Submit\"));\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      error: \"\",\n      redirectToReferer: false,\n      loading: false,\n      recaptcha: false\n    };\n    return _this;\n  }\n\n  _createClass(Signin, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          error = _this$state2.error,\n          redirectToReferer = _this$state2.redirectToReferer,\n          loading = _this$state2.loading,\n          recaptcha = _this$state2.recaptcha;\n\n      if (redirectToReferer) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-5 mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"SignIn\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(SocialLogin, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"alert alert-danger\",\n        style: {\n          display: error ? \"\" : \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, error), loading ? React.createElement(\"div\", {\n        className: \"jumbotron text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Loading...\")) : \"\", this.signinForm(email, password, recaptcha), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/forgot-password\",\n        className: \"btn btn-raised btn-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \" \", \"Forgot Password\")));\n    }\n  }]);\n\n  return Signin;\n}(Component);\n\nexport default Signin;","map":{"version":3,"sources":["/Users/feli-v/Desktop/socialMedia/react_front/src/user/Signin.js"],"names":["React","Component","Link","Redirect","signin","authenticate","SocialLogin","Signin","handleChange","name","event","setState","error","target","value","recaptchaHandler","e","userDay","toLowerCase","dayCount","Date","getDay","recaptcha","clickSubmit","preventDefault","loading","state","email","password","user","then","data","redirectToReferer","signinForm","display"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { signin, authenticate } from \"../auth\";\nimport SocialLogin from \"./SocialLogin\";\n\nclass Signin extends Component {\n    constructor() {\n        super();\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: \"\",\n            redirectToReferer: false,\n            loading: false,\n            recaptcha: false\n        };\n    }\n\n    handleChange = name => event => {\n        this.setState({ error: \"\" });\n        this.setState({ [name]: event.target.value });\n    };\n\n    recaptchaHandler = e => {\n        this.setState({ error: \"\" });\n        let userDay = e.target.value.toLowerCase();\n        let dayCount;\n\n        if (userDay === \"sunday\") {\n            dayCount = 0;\n        } else if (userDay === \"monday\") {\n            dayCount = 1;\n        } else if (userDay === \"tuesday\") {\n            dayCount = 2;\n        } else if (userDay === \"wednesday\") {\n            dayCount = 3;\n        } else if (userDay === \"thursday\") {\n            dayCount = 4;\n        } else if (userDay === \"friday\") {\n            dayCount = 5;\n        } else if (userDay === \"saturday\") {\n            dayCount = 6;\n        }\n\n        if (dayCount === new Date().getDay()) {\n            this.setState({ recaptcha: true });\n            return true;\n        } else {\n            this.setState({\n                recaptcha: false\n            });\n            return false;\n        }\n    };\n\n    clickSubmit = event => {\n        event.preventDefault();\n        this.setState({ loading: true });\n        const { email, password } = this.state;\n        const user = {\n            email,\n            password\n        };\n        // console.log(user);\n        if (this.state.recaptcha) {\n            signin(user).then(data => {\n                if (data.error) {\n                    this.setState({ error: data.error, loading: false });\n                } else {\n                    // authenticate\n                    authenticate(data, () => {\n                        this.setState({ redirectToReferer: true });\n                    });\n                }\n            });\n        } else {\n            this.setState({\n                loading: false,\n                error: \"What day is today? Please write a correct answer!\"\n            });\n        }\n    };\n\n    signinForm = (email, password, recaptcha) => (\n        <form>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email</label>\n                <input\n                    onChange={this.handleChange(\"email\")}\n                    type=\"email\"\n                    className=\"form-control\"\n                    value={email}\n                />\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Password</label>\n                <input\n                    onChange={this.handleChange(\"password\")}\n                    type=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                />\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">\n                    {recaptcha ? \"Thanks. You got it!\" : \"What day is today?\"}\n                </label>\n\n                <input\n                    onChange={this.recaptchaHandler}\n                    type=\"text\"\n                    className=\"form-control\"\n                />\n            </div>\n\n            <button\n                onClick={this.clickSubmit}\n                className=\"btn btn-raised btn-primary\"\n            >\n                Submit\n            </button>\n        </form>\n    );\n\n    render() {\n        const {\n            email,\n            password,\n            error,\n            redirectToReferer,\n            loading,\n            recaptcha\n        } = this.state;\n\n        if (redirectToReferer) {\n            return <Redirect to=\"/\" />;\n        }\n\n        return (\n            <div className=\"container\">\n                <h2 className=\"mt-5 mb-5\">SignIn</h2>\n                <hr />\n                <SocialLogin />\n\n                <hr />\n                <br />\n\n                <div\n                    className=\"alert alert-danger\"\n                    style={{ display: error ? \"\" : \"none\" }}\n                >\n                    {error}\n                </div>\n\n                {loading ? (\n                    <div className=\"jumbotron text-center\">\n                        <h2>Loading...</h2>\n                    </div>\n                ) : (\n                    \"\"\n                )}\n\n                {this.signinForm(email, password, recaptcha)}\n\n                <p>\n                    <Link\n                        to=\"/forgot-password\"\n                        className=\"btn btn-raised btn-danger\"\n                    >\n                        {\" \"}\n                        Forgot Password\n                    </Link>\n                </p>\n            </div>\n        );\n    }\n}\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}